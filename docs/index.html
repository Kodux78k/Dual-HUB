<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>DUAL.InfodoseðŸ”˜HUB</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon-180.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0b0b0b" id="metaThemeColor">
  <style>
    :root{
      --bg:#0b0b0b; --fg:#fff; --muted:#b9c7cf; --acc:#E7C65A;
      --stroke:rgba(255,235,180,.20); --stroke-soft:rgba(255,235,180,.12);
      --blur:22px; --radius:18px; --dock-space:84px; --maxw:980px;
    }
    html,body{height:100%;margin:0}
    html{background:var(--bg)}
    body{
      background:var(--bg); color:var(--fg);
      font-family:ui-rounded,system-ui,-apple-system,Inter,Segoe UI,Roboto,Arial;
      min-height:100vh; min-height:100svh;
    }
    .header{position:sticky;top:0;z-index:10;backdrop-filter:blur(var(--blur)) saturate(150%);background:rgba(0,0,0,.45);border-bottom:1px solid var(--stroke);box-shadow:0 12px 34px rgba(0,0,0,.42);padding-top:env(safe-area-inset-top)}
    .inner{max-width:var(--maxw);margin:0 auto;padding:14px;display:flex;gap:14px;align-items:center}
    .logo{width:46px;height:46px;border-radius:50%;display:inline-grid;place-items:center;position:relative;background:rgba(0,0,0,.25)}
    .ring{position:absolute;inset:0;border:2px solid var(--acc);border-radius:50%;animation:spin 6s linear infinite}
    .bar{position:absolute;left:50%;top:50%;width:60%;height:2px;background:var(--acc);transform:translate(-50%,-50%);border-radius:999px;animation:breathe 2.4s ease-in-out infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes breathe{0%,100%{opacity:.8}50%{opacity:1}}
    h1{font-size:1.16rem;margin:.12rem 0 0;font-weight:800}
    .kicker{font-size:.72rem;letter-spacing:.16em;color:#e0e0e0;text-transform:uppercase}
    .toolbar{max-width:var(--maxw);margin:10px auto 0;padding:0 14px 8px;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .pill{border:1px solid var(--stroke-soft);border-radius:999px;padding:.5rem .8rem;background:rgba(255,255,255,.04);font-weight:700}
    .input{flex:1;min-width:180px;border:1px solid var(--stroke-soft);border-radius:999px;padding:.6rem .9rem;background:rgba(255,255,255,.06);color:#fff;outline:none}
    .select{border:1px solid var(--stroke-soft);border-radius:999px;padding:.56rem .9rem;background:rgba(255,255,255,.06);color:#fff}
    .section{max-width:var(--maxw);margin:14px auto 6px;padding:0 14px}
    .section h2{font-size:.92rem;letter-spacing:.12em;text-transform:uppercase;color:#e6e6e6;margin:14px 0 8px;opacity:.9}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px}
    @media(max-width:560px){.grid{grid-template-columns:1fr}}
    .card{background:rgba(0,0,0,.32);border:1px solid var(--stroke-soft);border-radius:18px;padding:12px;display:flex;gap:12px;align-items:center;box-shadow:0 6px 18px rgba(0,0,0,.45)}
    .icon{width:56px;height:56px;border-radius:14px;display:grid;place-items:center;overflow:hidden;background:#0f1320;border:1px solid var(--stroke-soft)}
    .icon img{width:100%;height:100%;object-fit:cover;display:block}
    .title{font-weight:800;margin-bottom:4px;display:flex;gap:6px;align-items:center;flex-wrap:wrap}
    .badges{display:flex;gap:6px;flex-wrap:wrap}
    .badge{font-size:.72rem;padding:.16rem .5rem;border-radius:999px;border:1px solid var(--stroke-soft);background:rgba(255,255,255,.06);color:#eaf6ff}
    .muted{color:var(--muted);font-size:.86rem}
    .row{margin-top:8px;display:flex;gap:8px;flex-wrap:wrap}
    .btn{appearance:none;border:1px solid var(--stroke-soft);cursor:pointer;background:rgba(255,255,255,.06);color:#fff;padding:.64rem .9rem;border-radius:999px;font-weight:800}
    .btn.primary{background:linear-gradient(90deg,#9f7cff,#29d3ff);border-color:transparent}
    .dock{position:fixed;left:0;right:0;bottom:0;z-index:30;display:block}
    .dock-inner{max-width:var(--maxw);margin:0 auto;padding:8px 10px calc(8px + env(safe-area-inset-bottom));display:flex;gap:8px;justify-content:space-between;align-items:center;backdrop-filter:blur(18px) saturate(140%);background:rgba(0,0,0,.50);border-top:1px solid var(--stroke);box-shadow:0 -10px 30px rgba(0,0,0,.45)}
    .dbtn{appearance:none;border:1px solid var(--stroke);background:rgba(255,255,255,.06);color:#fff;padding:.64rem .9rem;border-radius:12px;font-weight:700}
    footer{color:#fff;font-size:.8rem;text-align:center;margin:18px 0 calc(18px + var(--dock-space));opacity:.9}
    .spacer{height:calc(var(--dock-space) + env(safe-area-inset-bottom) + 8px)}
    .viewer{position:fixed;inset:0;z-index:50;background:#000}
    .viewer iframe{position:absolute;inset:0 0 60px 0;border:0;width:100%;height:calc(100% - 60px)}
    .viewer-footer{position:fixed;left:0;right:0;bottom:0;height:60px;display:flex;gap:8px;align-items:center;justify-content:center;padding:8px 10px calc(8px + env(safe-area-inset-bottom));backdrop-filter:blur(18px) saturate(140%);background:rgba(0,0,0,.65);border-top:1px solid var(--stroke)}
  </style>
</head>
<body>
  <header class="header">
    <div class="inner">
      <span class="logo" aria-hidden="true"><span class="ring"></span><span class="bar"></span></span>
      <div style="flex:1">
        <div class="kicker">Infodose â€¢ Hub Principal</div>
        <h1>Infodose Hub Ultra</h1>
      </div>
      <nav aria-label="AÃ§Ãµes">
        <button class="btn primary" id="btnDownloadLoader" type="button">â¤“ Baixar Loader</button>
      </nav>
    </div>
  </header>

  <div class="toolbar">
    <input id="search" class="input" type="search" placeholder="Buscar e filtrar por nome, url, tagâ€¦" autocomplete="off"/>
    <select id="sort" class="select" title="OrdenaÃ§Ã£o">
      <option value="group">Ordenar por grupos</option>
      <option value="az">A â†’ Z</option>
      <option value="za">Z â†’ A</option>
    </select>
    <div class="pill" style="opacity:.6">Viewer ativo</div>
    <div class="pill" id="countApps">Carregandoâ€¦</div>
  </div>

  <main id="content"></main>
  <footer>Infodose Hub Ultra â€¢ PWA</footer>

  <div class="dock" role="navigation" aria-label="Dock">
    <div class="dock-inner">
      <button class="dbtn" id="dockHome" type="button">Home</button>
      <button class="dbtn" id="dockInfodose" type="button">Infodose</button>
      <button class="dbtn" id="dockInstall" type="button">â¤“ Baixar Loader</button>
    </div>
  </div>

<script>
const $ = (q,root=document)=>root.querySelector(q);
const $content = $('#content');
const $count = $('#countApps');
const $search = $('#search');
const $sort = $('#sort');

const FALLBACK_ICONS = {base:'icons/icon-192.png',chats:'icons/icon-192-chats.png',editors:'icons/icon-192-editors.png',indexrs:'icons/icon-192-indexrs.png'};

function safe(v){ return (v||'').toString(); }
function lastFile(url){try{ const u = new URL(url, location.href); return (u.pathname.split('/').pop()||'').toLowerCase(); }catch{ return (url||'').split('/').pop()?.toLowerCase() || ''; }}

function card(app){
  const c = document.createElement('div');
  c.className = 'card';
  c.innerHTML = `
    <div class="icon"><img src="${app.icon||FALLBACK_ICONS.base}" alt=""></div>
    <div style="flex:1">
      <div class="title">${safe(app.title||app.key)}</div>
      <div class="muted">${safe(app.desc||'')}</div>
      <div class="row">
        <button class="btn">Abrir</button>
        <button class="btn">âŽ˜ Injection</button>
      </div>
    </div>`;
  c.querySelector('.btn').addEventListener('click', ()=> openApp(app));
  c.querySelectorAll('.btn')[1].addEventListener('click', ()=> copyInjection(app));
  return c;
}

function openApp(app){
  const v = document.createElement('div');
  v.className = 'viewer';
  v.innerHTML = `
    <iframe src="${app.url}" allow="autoplay; clipboard-read; clipboard-write"></iframe>
    <div class="viewer-footer">
      <button class="btn" id="backHub">â¬… Voltar ao Hub</button>
      <button class="btn" id="dlHtml">â¤“ Baixar HTML (com Injections)</button>
      <button class="btn" id="copyInj">âŽ˜ Copiar Injection</button>
    </div>`;
  document.body.appendChild(v);
  v.querySelector('#backHub').addEventListener('click', ()=> v.remove());
  v.querySelector('#dlHtml').addEventListener('click', ()=> downloadInjected(app));
  v.querySelector('#copyInj').addEventListener('click', ()=> copyInjection(app));
}

function injectionSnippet(){return `<div class="infodose-footer"><button class="btn" onclick="location.href='index.html'">â¬… Voltar ao Hub</button></div>`;}

function copyInjection(app){navigator.clipboard.writeText(injectionSnippet());}

</script>
</body>
</html>
