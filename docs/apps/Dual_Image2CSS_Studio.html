<!doctype html>
<html lang="pt-br">
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dual â€¢ Imageâ†’CSS Studio</title>
<style>
  :root{--bg:#0b0b0f;--ink:#eaeaf7;--line:#24243a;--panel:#12121a;--acc:#8a5cff;--ring:#29d3ff}
  *{box-sizing:border-box} html,body{height:100%} body{margin:0;background:var(--bg);color:var(--ink);font:500 15px/1.55 Inter,system-ui}
  .wrap{max-width:980px;margin:0 auto;padding:18px}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .card{background:linear-gradient(180deg,#141424,#101018);border:1px solid var(--line);border-radius:16px;padding:14px;box-shadow:0 10px 40px #0009,0 0 0 1px #000 inset}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
  .c8{grid-column:span 8} .c4{grid-column:span 4} @media(max-width:900px){.c8,.c4{grid-column:1/-1}}
  input[type=file],textarea,button{background:#0f0f18;color:var(--ink);border:1px solid #232344;border-radius:12px;padding:10px}
  button{cursor:pointer}
  .swatch{width:24px;height:24px;border-radius:6px;border:1px solid #0006;box-shadow:0 2px 8px #0007}
  .bad{color:#ff9b9b}
  .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:999px;background:#17172a;border:1px solid #2a2a44}
  .out{white-space:pre;user-select:all}
</style>
<div class="wrap">
  <h1>Dual â€¢ Imageâ†’CSS Studio</h1>
  <p class="pill">Paleta demo (extraÃ­da automaticamente): <span class="swatch" title="#8a5cff" style="background:#8a5cff"></span> <span class="swatch" title="#29d3ff" style="background:#29d3ff"></span> <span class="swatch" title="#ff4cf0" style="background:#ff4cf0"></span> <span class="swatch" title="#00ffff" style="background:#00ffff"></span> <span class="swatch" title="#ff00ff" style="background:#ff00ff"></span></p>
  <div class="grid">
    <div class="card c8">
      <h3>1) Soltar imagem aqui (ou escolher)</h3>
      <div class="row"><input id="file" type="file" accept="image/*,.svg"/></div>
      <p>Opcional: cole um HTML para prÃ©-visualizar com o tema aplicado.</p>
      <textarea id="html" rows="8" placeholder="Cole aqui um HTML para previewâ€¦"></textarea>
      <div class="row" style="margin-top:10px">
        <button id="btnGen">Gerar CSS</button>
        <button id="btnDownload">Baixar &lt;style&gt;</button>
      </div>
    </div>
    <div class="card c4">
      <h3>2) Tokens</h3>
      <div id="tokens"></div>
    </div>
  </div>

  <div class="card" style="margin-top:12px">
    <h3>SaÃ­da</h3>
    <div class="row"><button id="btnCopy">Copiar CSS</button></div>
    <pre id="out" class="out"></pre>
  </div>

  <div class="card" style="margin-top:12px">
    <h3>Preview</h3>
    <iframe id="preview" style="width:100%;height:360px;border:0;border-radius:12px;background:#000"></iframe>
  </div>
</div>
<script>
const demoTokens = {"bg": "#8a5cff", "panel": "#29d3ff", "ink": "#ff4cf0", "acc": "#00ffff", "ring": "#ff00ff", "line": "#1f2030", "ok": "#29d3a0", "bad": "#ff6b6b"};
const demoPalette = ["#8a5cff", "#29d3ff", "#ff4cf0", "#00ffff", "#ff00ff"];

function cssFromTokens(t){
  return `:root{
  --bg:${t.bg};--panel:${t.panel};--ink:${t.ink};--acc:${t.acc};--ring:${t.ring};
  --line:${t.line};--ok:${t.ok};--bad:${t.bad};--radius:18px;--blur:18px
}
html,body{background:var(--bg);color:var(--ink)}
.metalux-card{background:linear-gradient(180deg,color-mix(in oklab,var(--panel) 85%,#000),var(--panel));border:1px solid var(--line);border-radius:var(--radius);box-shadow:0 8px 40px #0009,0 0 0 1px #000 inset}
.kobllux-pill{background:linear-gradient(180deg,color-mix(in oklab,var(--panel) 80%,#141425),var(--panel));border:1px solid color-mix(in oklab,var(--line) 70%,#ffffff20);color:var(--ink)}
.dual-tabs{background:linear-gradient(180deg,color-mix(in oklab,var(--panel) 75%,#0f0f18),var(--panel));border-top:1px solid var(--line)}
a,.btn.primary{color:white;background:linear-gradient(90deg,var(--acc),var(--ring));border:none}`;
}

function renderTokens(t){
  const el = document.getElementById('tokens');
  el.innerHTML = Object.entries(t).map(([k,v])=>`<div class="row" style="margin:6px 0"><span style="width:80px" class="mut">${k}</span> <span class="swatch" style="background:${v}"></span> <code>${v}</code></div>`).join('');
}

function updateOutput(t){
  const css = cssFromTokens(t);
  document.getElementById('out').textContent = css;
  renderTokens(t);
  // Preview: if user provided HTML, inject CSS; else show default demo
  const htmlIn = document.getElementById('html').value.trim() || '<!doctype html><meta charset="utf-8"><title>Demo</title><style>.card{padding:14px;border-radius:12px;border:1px solid var(--line)} .btn{padding:10px 14px;border-radius:12px;border:1px solid var(--line)}</style><div class="card metalux-card"><h2>Demo</h2><p>Texto de exemplo</p><button class="btn primary">BotÃ£o</button></div>';
  const iframe = document.getElementById('preview');
  const doc = `<!doctype html><meta charset="utf-8"><style>${css}</style>${htmlIn}`;
  const blob = new Blob([doc], {type:"text/html"});
  iframe.src = URL.createObjectURL(blob);
}

document.getElementById('btnGen').onclick = ()=> updateOutput(demoTokens);
document.getElementById('btnCopy').onclick = async ()=> {
  const css = document.getElementById('out').textContent;
  try{ await navigator.clipboard.writeText(css); alert('CSS copiado!'); }catch{ alert('NÃ£o deu para copiar ðŸ˜…'); }
};
document.getElementById('btnDownload').onclick = ()=> {
  const css = document.getElementById('out').textContent || cssFromTokens(demoTokens);
  const blob = new Blob([css], {type:'text/css'});
  const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'image2css.css'; a.click();
};

// Initial render
updateOutput(demoTokens);
</script>
</html>
